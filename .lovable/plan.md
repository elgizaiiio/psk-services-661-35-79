
# ุฎุทุฉ ูุณุงุจูุฉ Bolt Town ุงูููููุฉ (ุงููุณุฎุฉ ุงูููุญุฏูุซุฉ)

## ููุฎุต ุงูุชุญุฏูุซุงุช ุงููุทููุจุฉ

ุจูุงุกู ุนูู ุทูุจูุ ุชู ุชุนุฏูู ุงูุฎุทุฉ ูุชุดูู:

1. **ุฅุดุนุงุฑ ูููู ูุฌููุน ุงููุณุชุฎุฏููู** ุนูุฏ ุฅุนูุงู ุงููุงุฆุฒ ูุจุฏุก ุงููุณุงุจูุฉ ุงูุฌุฏูุฏุฉ
2. **ุงููููุฉ ุงูุฎุงุตุฉ = ุฏูุน 0.5 TON** (ุจุฏูุงู ูู ูููุฉ ุนุงุฏูุฉ)
3. **ูุง ุญุฏ ุฃูุตู ููุดุงูุฏุฉ ุงูุฅุนูุงูุงุช** - ุงููุณุชุฎุฏููู ูุดุงูุฏูู ุจุฑุงุญุชูู
4. **ุตูุฑุฉ ุงููุณุงุจูุฉ** - ุณูุชู ูุณุฎูุง ูุงุณุชุฎุฏุงููุง ูู ุงูุตูุญุฉ

---

## ูุธุงู ุงูููุงุท ุงูููุญุฏูุซ

| ุงููุดุงุท | ุงูููุงุท |
|--------|--------|
| ุฏุนูุฉ ุตุฏูู ุญูููู | +10 ููุงุท |
| ุงูุตุฏูู ุฃููู ูููุฉ ูุงุญุฏุฉ | +5 ููุงุท ุฅุถุงููุฉ |
| ุฅููุงู ูููุฉ ุนุงุฏูุฉ | +5 ููุงุท |
| **ุงููููุฉ ุงูุฎุงุตุฉ: ุฏูุน 0.5 TON** | **+10 ููุงุท** (ูุฑุฉ ูุงุญุฏุฉ ููููุงู) |
| ูุดุงูุฏุฉ ุฅุนูุงู | +2 ููุงุท **(ุจูุง ุญุฏ ุฃูุตู)** |
| ุชุณุฌูู ุงูุฏุฎูู ุงููููู ููุชุนุฏูู | +1 ููุทุฉ |
| ุณูุณูุฉ ูุดุงุท 3 ุฃูุงู | +5 ููุงุท |

---

## ูุธุงู ุงูุฅุดุนุงุฑุงุช ุงูููููุฉ

### ุงูุฅุดุนุงุฑ ุงูุฃูู: ุฅุนูุงู ุงููุงุฆุฒ (ููุชุตู ุงูููู UTC)
ููุฑุณู ูู **ุฌููุน ุงููุณุชุฎุฏููู** ุชููุงุฆูุงู:

```
๐ Bolt Town Daily Winner!

๐ Congrats @winner_username!
๐ฐ Won: 2.5 USDT
๐ Points: 150

โก New competition starts NOW!
๐ฏ Complete tasks, invite friends & watch ads
๐ต Today's prize: 2.5 USDT

Tap to join! ๐
```

### ุงูุฅุดุนุงุฑ ููุฃุฏูู (ุฎุงุต)
ููุฑุณู ููุท ููุฃุฏูู ูุน ุชูุงุตูู ุงููุญูุธุฉ:

```
๐ Admin: Bolt Town Winner

๐ค @username (ID: 123456789)
๐ Points: 150
๐ฐ Prize: 2.5 USDT
๐ฌ Wallet: EQB...xyz
โ Auto-credited to balance
```

---

## ุงููููุงุช ูุงูุชุบููุฑุงุช ุงููุทููุจุฉ

### 1. ูุงุนุฏุฉ ุงูุจูุงูุงุช (ุฌุฏุงูู ุฌุฏูุฏุฉ)

```sql
-- ุฌุฏูู ููุงุท Bolt Town ุงูููููุฉ
CREATE TABLE bolt_town_daily_points (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES bolt_users(id),
  date DATE DEFAULT CURRENT_DATE,
  referral_points INTEGER DEFAULT 0,
  referral_bonus_points INTEGER DEFAULT 0,
  task_points INTEGER DEFAULT 0,
  special_task_points INTEGER DEFAULT 0,
  ad_points INTEGER DEFAULT 0,
  activity_points INTEGER DEFAULT 0,
  streak_bonus INTEGER DEFAULT 0,
  total_points INTEGER GENERATED ALWAYS AS 
    (referral_points + referral_bonus_points + task_points + 
     special_task_points + ad_points + activity_points + streak_bonus) STORED,
  special_task_done BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(user_id, date)
);

-- ุฌุฏูู ุงููุงุฆุฒูู
CREATE TABLE bolt_town_daily_winners (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES bolt_users(id),
  telegram_id BIGINT,
  telegram_username TEXT,
  wallet_address TEXT,
  date DATE UNIQUE,
  total_points INTEGER,
  prize_usdt NUMERIC DEFAULT 2.5,
  admin_notified BOOLEAN DEFAULT FALSE,
  all_users_notified BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- ููุฑุณ ููุฃุฏุงุก
CREATE INDEX idx_bolt_town_points_date ON bolt_town_daily_points(date, total_points DESC);
CREATE INDEX idx_bolt_town_points_user ON bolt_town_daily_points(user_id, date);
```

### 2. ุตูุญุฉ ุฌุฏูุฏุฉ: `src/pages/BoltTown.tsx`

ุตูุญุฉ ุงููุณุงุจูุฉ ุงูุฑุฆูุณูุฉ ุชุญุชูู ุนูู:

- **ุตูุฑุฉ ุงููุณุงุจูุฉ** (ุงูุตูุฑุฉ ุงููุฑููุฉ)
- **ุงูุนุฏ ุงูุชูุงุฒูู** ูููุชุตู ุงูููู UTC
- **ููุญุฉ ุงูุตุฏุงุฑุฉ** ุงููุจุงุดุฑุฉ (ุฃุนูู 50 ูุณุชุฎุฏู)
- **ููุงุท ุงููุณุชุฎุฏู ุงูุญุงูู** ูุชุฑุชูุจู
- **ุงููููุฉ ุงูุฎุงุตุฉ** (ุฏูุน 0.5 TON ููุงุจู +10 ููุงุท)
- **ุดุฑุญ ูุธุงู ุงูููุงุท** ูุงูููุงุนุฏ
- **ุงูุฌุงุฆุฒุฉ** (2.5 USDT)

### 3. Hook ุฌุฏูุฏ: `src/hooks/useBoltTown.ts`

ููุชุนุงูู ูุน:
- ุฌูุจ ูุชุญุฏูุซ ุงูููุงุท ุงูููููุฉ
- ุงูุชุญูู ูู ุงููููุฉ ุงูุฎุงุตุฉ
- ุญุณุงุจ ุงูุชุฑุชูุจ ูู ุงูููุช ุงููุนูู
- ุชุชุจุน ุฌููุน ุงูุฃูุดุทุฉ

### 4. Edge Function: `supabase/functions/bolt-town-daily-reset/index.ts`

ุชุนูู ุนูุฏ ููุชุตู ุงูููู UTC:

```
1. ุชุญุฏูุฏ ุงููุงุฆุฒ (ุตุงุญุจ ุฃุนูู ููุงุท)
2. ุฅุถุงูุฉ 2.5 USDT ูุฑุตูุฏ ุงููุงุฆุฒ
3. ุญูุธ ุจูุงูุงุช ุงููุงุฆุฒ (ุงุณู + ูุญูุธุฉ)
4. ุฅุฑุณุงู ุฅุดุนุงุฑ ุฎุงุต ููุฃุฏูู (ูุน ุงููุญูุธุฉ)
5. ุฅุฑุณุงู ุฅุดุนุงุฑ ุนุงู ูุฌููุน ุงููุณุชุฎุฏููู (ุฅุนูุงู ุงููุงุฆุฒ + ุจุฏุก ุงููุณุงุจูุฉ)
6. ุฅุนุงุฏุฉ ุถุจุท ุฌููุน ุงูููุงุท ูููู ุฌุฏูุฏ
```

### 5. ุชุนุฏูู ุงููููุงุช ุงูููุฌูุฏุฉ

| ุงูููู | ุงูุชุนุฏูู |
|-------|---------|
| `src/App.tsx` | ุฅุถุงูุฉ ูุณุงุฑ `/bolt-town` |
| `src/pages/Index.tsx` | ุฅุถุงูุฉ ุจุงูุฑ ูููุณุงุจูุฉ |
| `src/hooks/useBoltReferrals.ts` | ุฅุถุงูุฉ ููุงุท ุงูุฅุญุงูุฉ ูููุณุงุจูุฉ |
| `src/hooks/useBoltTasks.ts` | ุฅุถุงูุฉ ููุงุท ุงูููุงู |
| `src/components/ads/WatchAdCard.tsx` | ุฅุถุงูุฉ ููุงุท ุงูุฅุนูุงูุงุช (ุจูุง ุญุฏ) |
| `src/hooks/useBoltMining.ts` | ุฅุถุงูุฉ ููุทุฉ ุงููุดุงุท ุงููููู |

### 6. ูููู ุงููููุฉ ุงูุฎุงุตุฉ: `src/components/bolt-town/SpecialTonTask.tsx`

ูููุฉ ุฏูุน 0.5 TON ููููุงู:
- ุชุธูุฑ ูุฑุฉ ูุงุญุฏุฉ ูู ุงูููู
- ุนูุฏ ุงูุฏูุน: +10 ููุงุท ูููุณุงุจูุฉ
- ุชุณุชุฎุฏู ููุณ ูุธุงู ุงูุฏูุน ุงูููุฌูุฏ (TonConnect)

### 7. ุฅุถุงูุฉ Cron Job

ูุชุดุบูู `bolt-town-daily-reset` ุนูุฏ ููุชุตู ุงูููู UTC ููููุงู:

```sql
SELECT cron.schedule(
  'bolt-town-daily-reset',
  '0 0 * * *', -- ููุชุตู ุงูููู UTC
  $$
  SELECT net.http_post(
    url:='https://pxerqticmmpurwmumhyw.supabase.co/functions/v1/bolt-town-daily-reset',
    headers:='{"Authorization": "Bearer ANON_KEY"}'::jsonb
  );
  $$
);
```

---

## ุชุฏูู ุงูุนูู ุงููููู

```
ููุชุตู ุงูููู UTC
     |
     v
+--------------------+
| ุชุญุฏูุฏ ุงููุงุฆุฒ      |
| (ุฃุนูู ููุงุท)       |
+--------------------+
     |
     v
+--------------------+
| ุฅุถุงูุฉ 2.5 USDT    |
| ูุฑุตูุฏ ุงููุงุฆุฒ      |
+--------------------+
     |
     v
+--------------------+
| ุฅุดุนุงุฑ ุงูุฃุฏูู      |
| (ุงุณู + ูุญูุธุฉ)     |
+--------------------+
     |
     v
+--------------------+
| ุฅุดุนุงุฑ ุฌููุน        |
| ุงููุณุชุฎุฏููู        |
| (ุฅุนูุงู ุงููุงุฆุฒ)    |
+--------------------+
     |
     v
+--------------------+
| ุฅุนุงุฏุฉ ุถุจุท ุงูููุงุท  |
| ููู ุฌุฏูุฏ ูุจุฏุฃ!    |
+--------------------+
```

---

## ุชูุงุตูู ุชูููุฉ ุฅุถุงููุฉ

### ุฅุฑุณุงู ุงูุฅุดุนุงุฑุงุช ุงูุฌูุงุนูุฉ

ุณูุชู ุงุณุชุฎุฏุงู ููุณ ุงูุจููุฉ ุงูููุฌูุฏุฉ ูู `send-mass-broadcast`:
- ุฅุฑุณุงู ุจุฏูุนุงุช (500 ูุณุชุฎุฏู)
- ุชุฃุฎูุฑ 25ms ุจูู ุงูุฑุณุงุฆู
- ุชุฎุทู ุงููุณุชุฎุฏููู ุงููุญุธูุฑูู
- ุชุณุฌูู ุงูุฅุญุตุงุฆูุงุช

### ููุน ุงูุบุด

- ุงูุฅุญุงูุงุช ุชูุญุชุณุจ ููุท ูููุณุชุฎุฏููู ุงูุญูููููู
- ูููุฉ 0.5 TON ูุฑุฉ ูุงุญุฏุฉ ููููุงู ููุท
- ุงูุชุญูู ูู Telegram ID ุงููุฑูุฏ
- ูุง ููุฌุฏ ุญุฏ ููุฅุนูุงูุงุช (ููุง ุทูุจุช)

### ุตูุฑุฉ ุงููุณุงุจูุฉ

ุณูุชู ูุณุฎ ุงูุตูุฑุฉ ุงููุฑููุฉ ุฅูู:
`src/assets/bolt-town-banner.png`

ูุงุณุชุฎุฏุงููุง ูู ุตูุญุฉ ุงููุณุงุจูุฉ ูุตูุฑุฉ ุฑุฆูุณูุฉ.

---

## ุงููููุงุช ุงูุฌุฏูุฏุฉ

| ุงูููู | ุงููุตู |
|-------|-------|
| `src/pages/BoltTown.tsx` | ุตูุญุฉ ุงููุณุงุจูุฉ ุงูุฑุฆูุณูุฉ |
| `src/hooks/useBoltTown.ts` | Hook ุฅุฏุงุฑุฉ ุงูููุงุท |
| `src/components/bolt-town/SpecialTonTask.tsx` | ูููุฉ ุฏูุน 0.5 TON |
| `src/components/bolt-town/BoltTownLeaderboard.tsx` | ููุญุฉ ุงูุตุฏุงุฑุฉ |
| `src/components/bolt-town/PointsDisplay.tsx` | ุนุฑุถ ุงูููุงุท |
| `supabase/functions/bolt-town-daily-reset/index.ts` | Edge Function |
| `src/assets/bolt-town-banner.png` | ุตูุฑุฉ ุงููุณุงุจูุฉ |
